{% extends 'dashboard/base.html' %}

{% block title %}Settings - Dashboard{% endblock %}

{% block page_title %}Settings{% endblock %}

{% block content %}
<div class="row">
    <!-- Exchange Rate Settings -->
    <div class="col-lg-6">
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="card-title mb-0">Exchange Rate Settings</h5>
            </div>
            <div class="card-body">
                {% if exchange_rate %}
                <div class="alert alert-info">
                    <strong>Current Rate:</strong> 1 USD = {{ exchange_rate.usd_to_uzs }} UZS<br>
                    <small class="text-muted">Updated: {{ exchange_rate.created_at|date:"M d, Y H:i" }}</small>
                </div>
                {% endif %}
                
                <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="update_exchange_rate">
                    <div class="mb-3">
                        <label for="exchange_rate" class="form-label">USD to UZS Rate</label>
                        <input type="number" class="form-control" id="exchange_rate" 
                               name="exchange_rate" step="0.01" 
                               value="{% if exchange_rate %}{{ exchange_rate.usd_to_uzs }}{% endif %}" 
                               required>
                        <div class="form-text">Enter the current exchange rate from USD to UZS</div>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Update Exchange Rate
                    </button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Payment Settings -->
    <div class="col-lg-6">
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="card-title mb-0">Payment Settings</h5>
            </div>
            <div class="card-body">
                {% if payment_settings %}
                <div class="alert alert-info">
                    <strong>Current Payment Info:</strong><br>
                    Card: {{ payment_settings.card_number }}<br>
                    Bank: {{ payment_settings.bank_name }}<br>
                    Holder: {{ payment_settings.card_holder_name }}
                </div>
                {% endif %}
                
                <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="update_payment_settings">
                    <div class="mb-3">
                        <label for="card_number" class="form-label">Card Number</label>
                        <input type="text" class="form-control" id="card_number" 
                               name="card_number" 
                               value="{% if payment_settings %}{{ payment_settings.card_number }}{% endif %}" 
                               required>
                    </div>
                    <div class="mb-3">
                        <label for="card_holder" class="form-label">Card Holder Name</label>
                        <input type="text" class="form-control" id="card_holder" 
                               name="card_holder" 
                               value="{% if payment_settings %}{{ payment_settings.card_holder_name }}{% endif %}" 
                               required>
                    </div>
                    <div class="mb-3">
                        <label for="bank_name" class="form-label">Bank Name</label>
                        <input type="text" class="form-control" id="bank_name" 
                               name="bank_name" 
                               value="{% if payment_settings %}{{ payment_settings.bank_name }}{% endif %}" 
                               required>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Update Payment Settings
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- System Information -->
<div class="card">
    <div class="card-header">
        <h5 class="card-title mb-0">System Information</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h6>Application</h6>
                <p><strong>Name:</strong> Avtokontinent.uz</p>
                <p><strong>Version:</strong> 1.0.0</p>
                <p><strong>Environment:</strong> {% if settings.DEBUG %}Development{% else %}Production{% endif %}</p>
            </div>
            <div class="col-md-6">
                <h6>Quick Links</h6>
                <div class="d-flex gap-2 flex-wrap">
                    <a href="{% url 'admin:index' %}" class="btn btn-outline-primary" target="_blank">
                        <i class="fas fa-tools"></i> Admin Panel
                    </a>
                    <a href="{% url 'dashboard:home' %}" class="btn btn-outline-secondary" target="_blank">
                        <i class="fas fa-external-link-alt"></i> View Site
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}